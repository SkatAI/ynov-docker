# Un peu de linux

Dans ce document

- lancer un container avec une distribution Ubuntu ou Alpine
- Linux 101

## Linux Alpine

Linux existe en beaucoup de versions. La plus commune est Ubuntu.

Il y a plus de 600 distro Linux active avec Ubuntu qui compte pour 34%, suivi par Debian. 

On va utiliser une distribution de taille faible appelé Alpine plutot que Ubuntu qui est plus grosse. 
Pour nos besoins cela sera amplement suffisant.

Beaucoup des images python et autres sont construites a partir de Alpine

Dans un terminal

```bash
docker run -i -t ubuntu /bin/bash
```

Qu'observe t on ?

Docker

- ne trouve pas l'image de Ubuntu locallement il va donc la recupèrer sur un repository
- Il crée un container
- le démarre et execute: /bin/bash

on voir donc le prompt par défaut sur une distribution Ubuntu



> commande pour verifier la version de ubuntu

```bash
apt-get update && apt-get install -y lsb-release
lsb_release -a
```

devrait retourner

```bash
No LSB modules are available.
Distributor ID: Ubuntu
Description: Ubuntu 24.04 LTS
Release: 24.04
Codename: noble
```

On a donc installé la version 24.04 de Ubuntu. Par défaut docker va recuperer la derniere version d'une image (tag: latest)

pour sortir du container

```bash
exit
```

Le container est stoppé mais existse toujours. il n'est pas supprimé.
On peut le redemmarer avec la meme commande
si vous runnez 
```bash 
docker run -i -t ubuntu /bin/bash
``` 
à nouveau, vous etes instantanement dans ubuntu

De meme vous pouvez acceder au container dans **Docker Desktop**
Cliquez sur le nom du container et le tab terminal



### Les flags -i et -t

On a utilisé 2 flags -i -t

```bash
docker run --help
```
donne les infos

* ```-t, --tty: Allocate a pseudo-TTY```
le flag `-t` ou `--tty` simule un terminal interactif (`tty`) dans le conteneur.
* ```  -i, --interactive: Keep STDIN open even if not attached```
Le flag `-i` (ou `--interactive`) force Docker à garder le **STDIN** (Standard Input) ouvert même quand le conteneur n'est pas attaché à un terminal interactif.

Les 2 flags sont souvent utilisés ensemble.

Si on oublie les 2 flasg 

```bash
docker run ubuntu /bin/bash
```
le container est executé mais on y a pas acces

avec seulement -i 
le terminal ne redonne pas la main

et avec seulement -t: le terminal reste accessible avec le prompt de ubuntu

Une fois dans le terminal ubuntu 

* `pwd` donne le path du working directory. le director courant
* `ls` liste les directlry et ficheirs. essayer aussi `ls -al`



### executer une commande sur un container qui tourne

On peut aussi passer une commande au bash de ubtuntu sans le faire manuellement

```bash
docker run ubuntu /bin/bash <commande>
```

par exemple

```bash
docker run ubuntu /bin/bash -c pwd
```

ou 
```bash
docker run ubuntu /bin/bash -c ls
```

### En résumé

* facile de lancer un container ubuntu et d'acceder au terminal interne au container soit avec desktop, soit avec les fflags `-it`

* `docker <command> --help` permet d'avoir la liste des flags que l'on peut utiliser pour la commande




